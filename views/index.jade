extends layout

block content
  h1= title
  p Welcome to #{title}
  script(src='/socket.io/socket.io.js')
  script
      var socket = io.connect('/');
        socket.on('msg', function (data) {
            console.log(data);
            document.getElementById("message").innerHTML += data.date + "  " + data.message + "<br>";
        });

      function submit(){
        var message = document.getElementById("msg").value;
        var now = new Date();

        var date = now.getFullYear()  + "-" + (now.getMonth() + 1) + "-" + now.getDate() + " " + now.getHours() + ":" + now.getMinutes() + ":" + now.getSeconds()
        socket.emit("msg",{date : date, message : message});
      }

  input(name='msg')#msg
  button(onclick='submit()') Submit

  #message

